package Mapa;

import Obstaculo.*;
import Lista.*;
import java.io.BufferedReader;
import java.io.FileNotFoundException;
import java.io.FileReader;
import java.io.IOException;

public class Mapa{
	private Obstaculo[][] obstaculos;
	private char[][] letras;
	
	public Mapa(String mapa){
		obstaculos=new Obstaculo[26][26];
		letras= new char[26][26];
		try{
			cargarMapa(mapa);
			cargarLetras(mapa);
		}catch(FileNotFoundException e){
		} catch (IOException e) {
		}
	}
		
	
	
	public int getLongitud(){
		return obstaculos.length;
	}
	public Iterable<ListaSimplementeEnlazada<Obstaculo>> retornarMapa(){
		PositionList<ListaSimplementeEnlazada<Obstaculo>> lista= new ListaSimplementeEnlazada<ListaSimplementeEnlazada<Obstaculo>>();
		ListaSimplementeEnlazada<Obstaculo> listaAux= new ListaSimplementeEnlazada<Obstaculo>();
		for(int i=0;i<getLongitud();i++){
			for(int j=0;j<getLongitud();j++){
				listaAux.addLast(obstaculos[i][j]);
			}
			lista.addLast(listaAux);
		}
		return lista;
	}

	public Iterable<ListaSimplementeEnlazada<Character>> retornarMapa(){
		PositionList<ListaSimplementeEnlazada<Character>> lista= new ListaSimplementeEnlazada<ListaSimplementeEnlazada<Character>>();
		ListaSimplementeEnlazada<Character> listaAux= new ListaSimplementeEnlazada<Character>();
		for(int i=0;i<getLongitud();i++){
			for(int j=0;j<getLongitud();j++){
				listaAux.addLast(letras[i][j]);
			}
			lista.addLast(listaAux);
		}
		return lista;
	}
	
	
	
	
	
	
	
	
	
	
	
	private void cargarLetras(String map) throws IOException, FileNotFoundException{
		String cadena;
		char[] c;
		int fila=0;
		FileReader f= new FileReader(map);
		BufferedReader b= new BufferedReader(f);
		while((cadena=b.readLine())!=null){
			c=cadena.toCharArray();
			for(int i=0;i<c.length;i++){
				letras[fila][i]= c[i];
			}
			fila++;
		}
		b.close();
	}
	
	private void cargarMapa(String map) throws IOException, FileNotFoundException{
		String cadena;
		char[] c;
		int fila=0;
		FileReader f= new FileReader(map);
		BufferedReader b= new BufferedReader(f);
		while((cadena=b.readLine())!=null){
			c=cadena.toCharArray();
			for(int i=0;i<c.length;i++){
				if(c[i]=='A'){
					obstaculos[fila][i]= new Acero();
				}
				else{
					if(c[i]=='L'){
						obstaculos[fila][i]= new Ladrillo();
					}
					else{
						if(c[i]=='G'){
							obstaculos[fila][i]= new Agua();
						}
						else{
							if(c[i]=='C'){
								obstaculos[fila][i]= new Cesped();
							}
							else{
								if(c[i]=='N'){
									obstaculos[fila][i]= null;
								}
							}
						}
					}
				}
			}
			fila++;
		}
		b.close();
	}
}